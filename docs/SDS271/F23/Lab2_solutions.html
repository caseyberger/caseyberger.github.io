<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Casey E. Berger – lab2_solutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"express",
  "palette":"dark",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Casey E. Berger</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about-me" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">About Me</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about-me">    
        <li>
    <a class="dropdown-item" href="../../bio.html" rel="" target="">
 <span class="dropdown-text">About Me</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../cv_and_pubs.html" rel="" target="">
 <span class="dropdown-text">CV and Publications</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching-and-pedagogy" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Teaching and Pedagogy</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teaching-and-pedagogy">    
        <li>
    <a class="dropdown-item" href="../../teaching_philosophy.html" rel="" target="">
 <span class="dropdown-text">Teaching Philosophy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../inclusive_classroom.html" rel="" target="">
 <span class="dropdown-text">Building an Inclusive Classroom</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-science-in-the-physics-classroom" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Science in the Physics Classroom</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-science-in-the-physics-classroom">    
        <li>
    <a class="dropdown-item" href="../../beginning_python.html" rel="" target="">
 <span class="dropdown-text">Beginning Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../python_data_science.html" rel="" target="">
 <span class="dropdown-text">Teaching Data Science to Physics Students</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sds-271-fall-2023" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">SDS 271 Fall 2023</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sds-271-fall-2023">    
        <li>
    <a class="dropdown-item" href="../../sds-271-f23.html" rel="" target="">
 <span class="dropdown-text">SDS 271 Fall 2023</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../SDS271/F23/Lab1_clean.html" rel="" target="">
 <span class="dropdown-text">Lab 1: Getting Started</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../SDS271/F23/Lab2_clean.html" rel="" target="">
 <span class="dropdown-text">Lab 2: Statistics and Betting</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sds-271-lab-2-statistics-and-betting" id="toc-sds-271-lab-2-statistics-and-betting" class="nav-link active" data-scroll-target="#sds-271-lab-2-statistics-and-betting">SDS 271 Lab 2: Statistics and Betting</a>
  <ul class="collapse">
  <li><a href="#a-simple-scenario-flipping-a-coin" id="toc-a-simple-scenario-flipping-a-coin" class="nav-link" data-scroll-target="#a-simple-scenario-flipping-a-coin">A simple scenario: flipping a coin</a>
  <ul class="collapse">
  <li><a href="#python-random" id="toc-python-random" class="nav-link" data-scroll-target="#python-random">Python random</a></li>
  <li><a href="#importing-modules" id="toc-importing-modules" class="nav-link" data-scroll-target="#importing-modules">Importing modules</a></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together">Putting it all together</a></li>
  </ul></li>
  <li><a href="#monte-carlo-methods" id="toc-monte-carlo-methods" class="nav-link" data-scroll-target="#monte-carlo-methods">Monte Carlo methods</a>
  <ul class="collapse">
  <li><a href="#basic-visualization-with-matplotlib" id="toc-basic-visualization-with-matplotlib" class="nav-link" data-scroll-target="#basic-visualization-with-matplotlib">Basic visualization with matplotlib</a></li>
  <li><a href="#performing-simple-statistics-with-numpy" id="toc-performing-simple-statistics-with-numpy" class="nav-link" data-scroll-target="#performing-simple-statistics-with-numpy">Performing simple statistics with numpy</a></li>
  </ul></li>
  <li><a href="#the-monty-hall-problem" id="toc-the-monty-hall-problem" class="nav-link" data-scroll-target="#the-monty-hall-problem">The Monty Hall Problem</a></li>
  <li><a href="#why-the-house-always-wins" id="toc-why-the-house-always-wins" class="nav-link" data-scroll-target="#why-the-house-always-wins">Why the House Always Wins</a>
  <ul class="collapse">
  <li><a href="#the-scenario" id="toc-the-scenario" class="nav-link" data-scroll-target="#the-scenario">The scenario</a></li>
  <li><a href="#the-simulation" id="toc-the-simulation" class="nav-link" data-scroll-target="#the-simulation">The simulation</a></li>
  <li><a href="#testing-different-scenarios" id="toc-testing-different-scenarios" class="nav-link" data-scroll-target="#testing-different-scenarios">Testing different scenarios</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#post-lab-production-and-reflection" id="toc-post-lab-production-and-reflection" class="nav-link" data-scroll-target="#post-lab-production-and-reflection">Post-Lab: Production and Reflection</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="sds-271-lab-2-statistics-and-betting" class="level1">
<h1>SDS 271 Lab 2: Statistics and Betting</h1>
<p>This lab will dig a little more deeply into your previous Python experience as we examine two case studies in statistical simulations: the Monty Hall Problem and why the House always wins in gambling.</p>
<section id="a-simple-scenario-flipping-a-coin" class="level2">
<h2 class="anchored" data-anchor-id="a-simple-scenario-flipping-a-coin">A simple scenario: flipping a coin</h2>
<p>What do you expect to happen if you flip a coin?</p>
<p>The answer depends on the possible outcomes and their likelihoods. This is the simplest way to express probability. A balanced coin has two unique sides (heads and tails) and each side has an equal likelihood of coming out on top if there is no bias in your toss (okay, so we are making a lot of simplifying assumptions). That means your total likelihood of 1 (or 100%) must be split evenly:</p>
<p>P(heads) = 0.5</p>
<p>P(tails) = 0.5</p>
<p>Each individual coin toss contains an element of randomness. It doesn’t matter that you just got heads, you still have an even fifty-fifty chance to get gets again. But if you flip the coin many times, even if you get heads ten times in a row, you should still eventually get enough tails to even out the statistics so that roughly half your tosses come up heads and half come up tails.</p>
<section id="python-random" class="level3">
<h3 class="anchored" data-anchor-id="python-random">Python random</h3>
<p>Python has a module that allows you to generate pseudo-random numbers. The world of random number generators is wide, but we’ll keep it simple for this class.</p>
</section>
<section id="importing-modules" class="level3">
<h3 class="anchored" data-anchor-id="importing-modules">Importing modules</h3>
<p>Sometimes we will need to use tools that aren’t in base Python. To do this, we will import other packages (or “modules”) that contain what we need. To import a module, you have to tell Jupyter to import the module, and then you can (optionally) tell the notebook how you’d like to call on this module so you don’t have to write out its whole name every time. For example, we will use the Numerical Python package called “numpy” often in this class. It’s standard to refer to numpy as “np” so we would import it like this:</p>
<pre><code>import numpy as np</code></pre>
<p>The “import numpy” instruction tells it to import the module known officially as numpy and the added “as np” instruction tells it that when you refer to np later, you mean numpy.</p>
<div class="alert alert-info">
<p>Exercise 1:</p>
<p>Import the python random module with nickname “rd”</p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random <span class="im">as</span> rd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now that you’ve imported the module, you can use it. But remember you have to call it using the nickname you gave it. So if I wanted to generate a random number between 0 and 1, I would use the random() function.</p>
<pre><code>rd.random()

&gt; 0.42361251090879926</code></pre>
<p>You can learn more about the module you just imported <a href="https://docs.python.org/3/library/random.html"> here</a>, including lots of other functions it contains that may be helpful in the upcoming activities.</p>
<div class="alert alert-info">
<p>Exercise 2:</p>
<p>Investigate the documentation for the Python random module and do the following: <ui></ui></p>
<li>
Generate a random integer between 1 and 6 (inclusive)
</li>
<li>
Pick randomly from a list of “heads” and “tails”
</li>
<p></p>
<p>Make sure you repeat this enough times to be sure that it’s doing what you want it to (hint: write a for loop to repeat this process)</p>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(rd.randrange(<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>1
6
4
5
3
2
3
5
1
3</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>coin_list <span class="op">=</span> [<span class="st">"heads"</span>,<span class="st">"tails"</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(rd.choice(coin_list))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>heads
heads
heads
heads
tails
tails
tails
tails
heads
heads</code></pre>
</section>
<section id="putting-it-all-together" class="level3">
<h3 class="anchored" data-anchor-id="putting-it-all-together">Putting it all together</h3>
<div class="alert alert-info">
<p>Exercise 3:</p>
<p>Write a simple function in Python that simulates flipping a coin. It should not take any arguments and it should return the outcome “heads” or “tails”.</p>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> coin_flip():</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    coin_sides <span class="op">=</span> [<span class="st">"heads"</span>,<span class="st">"tails"</span>]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rd.choice(coin_sides)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(coin_flip())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>tails
heads
tails
heads
tails
tails
heads
tails
tails
tails
heads
heads
heads
tails
heads
heads
heads
heads
heads
heads</code></pre>
<p>What is the probability of getting heads or tails? We have prior knowledge that tells us the answer here – it’s 50% for heads and 50% for tails. But how would we determine this experimentally? We can flip a coin many times and calculate what percentage of the time it came up with each option.</p>
<div class="alert alert-info">
<p>Exercise 4:</p>
<p>Write a simple function in Python that performs a coin flip some number of times and calculates the outcome. It should take as an argument the number of times you want to flip the coin, it should use your already-written coin-flip function, and it should return a dictionary with “heads” and “tails” as they keys and the fraction (decimal, not percent) of the times that that result occured.</p>
<p>Test your function with 20 coin flips. Repeat this a few times, checking the results each time. What do you notice?</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_coin_flip(n_flips):</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    n_heads <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    n_tails <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(n_flips):</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> coin_flip() <span class="op">==</span> <span class="st">"heads"</span>:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>            n_heads <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>            n_tails <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"heads"</span>: n_heads<span class="op">/</span>n_flips, <span class="st">"tails"</span>: n_tails<span class="op">/</span>n_flips}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(test_coin_flip(<span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>{'heads': 0.6, 'tails': 0.4}
{'heads': 0.5, 'tails': 0.5}
{'heads': 0.55, 'tails': 0.45}
{'heads': 0.65, 'tails': 0.35}
{'heads': 0.6, 'tails': 0.4}
{'heads': 0.35, 'tails': 0.65}
{'heads': 0.55, 'tails': 0.45}
{'heads': 0.75, 'tails': 0.25}
{'heads': 0.65, 'tails': 0.35}
{'heads': 0.45, 'tails': 0.55}</code></pre>
<div class="alert alert-success">
<p>Stop here for a minute. Check-in with <a href="https://app.sli.do/event/nxerK76JaKCmLuNqJ3eepS/embed/polls/0495c42d-356e-4edf-b95a-4b60a36994da"> slido</a> and then wait. Work on something else, help your neighbor, etc. We will be returning to this lab shortly.</p>
</div>
</section>
</section>
<section id="monte-carlo-methods" class="level2">
<h2 class="anchored" data-anchor-id="monte-carlo-methods">Monte Carlo methods</h2>
<p>Monte Carlo simulations take advantage of the law of large numbers and probabilities to simulate likely outcomes. It works by repeating small-scale experiments many times and averaging the results of those experiments.</p>
<p>So if you flipped a coin twenty times, you might get H/T = 0.4/0.6</p>
<p>If you did it again, you might get H/T = 0.75/0.25</p>
<p>If you did it a third time, maybe you’d get H/T = 0.55/0.45</p>
<p>Each of these experiments doesn’t get you the full picture, but repeated many times, you can get a statistical estimate for the likely results of the experiment.</p>
<div class="alert alert-info">
<p>Exercise 5:</p>
<p>Repeat your experiment of flipping a coin 20 times and save the results. Do this until you have 1000 sets of results saved as a nested dictionary.</p>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> {}</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    results[n] <span class="op">=</span> test_coin_flip(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>results[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>{'heads': 0.5, 'tails': 0.5}</code></pre>
<section id="basic-visualization-with-matplotlib" class="level3">
<h3 class="anchored" data-anchor-id="basic-visualization-with-matplotlib">Basic visualization with matplotlib</h3>
<p>We’re going to add a new package to our repertoire… <a href="https://matplotlib.org/"> matplotlib </a>.</p>
<p>There’s a lot to learn with matplotlib, but we will start with simple plotting: we just want the pyplot sub-package for matplotlib. Generally, this is imported with the nickname “plt”</p>
<div class="alert alert-info">
<p>Exercise 6:</p>
<p>Import matplotlib.pyplot with the nickname “plt”</p>
</div>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can use matplotlib to visualize the results of our 100 experiments.</p>
<div class="alert alert-info">
<p>Exercise 7:</p>
<p>Take your results dictionary and – however is easiest for you – turn it into two lists: one that stores the results that are heads and one that stores the results that are tails.</p>
<p>Then use the plt.hist(x) function to make two histograms – one for heads and one for tails.</p>
<p>Finally, adjust the number of bins in your histogram by adding “bins =” after the data inside your histogram. For example:</p>
<pre><code>plt.hist(heads_results, bins = 10)</code></pre>
</div>
<div class="alert alert-warning">
<pre><code>Hint: if you want to keep python from printing out information about your data and the plot, use plt.show() after your plot commands -- it cleans up the output.</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>heads_results <span class="op">=</span> [results[i][<span class="st">"heads"</span>] <span class="cf">for</span> i <span class="kw">in</span> results]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>tails_results <span class="op">=</span> [results[i][<span class="st">"tails"</span>] <span class="cf">for</span> i <span class="kw">in</span> results]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>plt.hist(heads_results, bins <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_37_0.png" class="img-fluid"></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>plt.hist(tails_results, bins <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_38_0.png" class="img-fluid"></p>
<div class="alert alert-success">
<p>Stop here for a minute. Check-in with <a href="https://app.sli.do/event/nxerK76JaKCmLuNqJ3eepS/embed/polls/0d379ab5-44eb-4a88-b14b-ea4c35449dbb"> slido</a> and then wait. Work on something else, help your neighbor, etc. We will be returning to this lab shortly.</p>
</div>
</section>
<section id="performing-simple-statistics-with-numpy" class="level3">
<h3 class="anchored" data-anchor-id="performing-simple-statistics-with-numpy">Performing simple statistics with numpy</h3>
<p>Visualizing the results can be useful, but we also want to know what this means numerically. What should you tell someone to expect if they plan to flip a coin twenty times? What is the likely range of outcomes they could experience? We can see from the plots that the most likely outcome is somewhere around 50/50, but that ratios of up to 30/70 are still fairly common. Almost never will the outcome of 20 coin flips be all heads or all tails. So let’s quantify this.</p>
<p>We’re going to use the package I mentioned earlier – <a href="https://numpy.org/"> Numpy</a> – to do this.</p>
<div class="alert alert-info">
<p>Exercise 8:</p>
<p>Import numpy with the nickname “np”</p>
</div>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The base “unit” of numpy is the numpy array. This is similar to a list in Python, but it’s much faster to use for calculations. Numpy uses vectorization to speed up all its internal functions.</p>
<p>You can convert a list to an array by using</p>
<pre><code>np.array(list_name) </code></pre>
<p>Once you have a numpy array, you can do a lot with it. We’re going to use <a href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html"> np.mean() </a>, <a href="https://numpy.org/doc/stable/reference/generated/numpy.std.html"> np.std() </a>, <a href="https://numpy.org/doc/stable/reference/generated/numpy.sqrt.html"> np.sqrt() </a>, <a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html"> np.arange() </a>, and <a href="https://numpy.org/doc/stable/reference/generated/numpy.cumsum.html"> np.cumsum() </a> today.</p>
<div class="alert alert-info">
<p>Exercise 9:</p>
<p>Convert your two lists (heads results and tails results) to numpy arrays and calculate the mean and standard deviation of those results.</p>
</div>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>heads_array <span class="op">=</span> np.array(heads_results)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>tails_array <span class="op">=</span> np.array(tails_results)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>heads_avg <span class="op">=</span> np.mean(heads_array)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>tails_avg <span class="op">=</span> np.mean(tails_array)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>heads_sdev <span class="op">=</span> np.std(heads_array)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>tails_sdev <span class="op">=</span> np.std(tails_array)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(heads_avg)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tails_avg)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(heads_sdev)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tails_sdev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>0.498
0.502
0.1092291169972549
0.1092291169972549</code></pre>
<p>Let’s add this information to the plot we already made. We made a histogram of the results of the heads experiments (stored in a numpy array called “heads_results”) like this:</p>
<pre><code>plt.hist(heads_results, bins = 10)
plt.show()</code></pre>
<p>If I want to add the mean as a vertical line, I can add a line of code after the hist() function but before plt.show():</p>
<pre><code>plt.hist(heads_results, bins = 10)
plt.axvline(x = heads_avg, color = 'b', label = 'mean result for heads')
plt.show()</code></pre>
<p>This creates a vertical line at some position x = heads_avg, which is the variable I used to store the mean value of the array we histogrammed. I’ve set the color to blue and given it a label.</p>
<p>If I want to add information about the standard error, I can use the axvspan() function:</p>
<pre><code>plt.hist(heads_results, color = 'gray',bins = 9)
plt.axvline(x = heads_avg, color = 'b', label = 'mean result for heads')
xmin = heads_avg - heads_sdev
xmax = heads_avg + heads_sdev
plt.axvspan(xmin,xmax, color='b', alpha=0.25)
plt.show()</code></pre>
<p>This fills the area on the plot between the x-values xmin and xmax, which I’ve calculated by finding the low end of our range (average minus error) and the high end of our range (average plus error). I picked the same color (blue) and set alpha (the opacity of the fill) to 0.25.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>plt.hist(heads_results, color <span class="op">=</span> <span class="st">'gray'</span>,bins <span class="op">=</span> <span class="dv">9</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>plt.axvline(x <span class="op">=</span> heads_avg, color <span class="op">=</span> <span class="st">'b'</span>, label <span class="op">=</span> <span class="st">'mean result for heads'</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>xmin <span class="op">=</span> heads_avg <span class="op">-</span> heads_sdev</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>xmax <span class="op">=</span> heads_avg <span class="op">+</span> heads_sdev</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>plt.axvspan(xmin,xmax, color<span class="op">=</span><span class="st">'b'</span>, alpha<span class="op">=</span><span class="fl">0.25</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_49_0.png" class="img-fluid"></p>
<div class="alert alert-info">
<p>Exercise 10:</p>
<p>Make a plot like we did above, but for the results for tails, not heads. Use red as the color, and make the fill more transparent.</p>
</div>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>plt.hist(tails_results, color <span class="op">=</span> <span class="st">'gray'</span>,bins <span class="op">=</span> <span class="dv">9</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>plt.axvline(x <span class="op">=</span> tails_avg, color <span class="op">=</span> <span class="st">'r'</span>, label <span class="op">=</span> <span class="st">'mean result for tails'</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>xmin <span class="op">=</span> tails_avg <span class="op">-</span> tails_sdev</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>xmax <span class="op">=</span> tails_avg <span class="op">+</span> tails_sdev</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>plt.axvspan(xmin,xmax, color<span class="op">=</span><span class="st">'r'</span>, alpha<span class="op">=</span><span class="fl">0.25</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_51_0.png" class="img-fluid"></p>
<p>The standard deviation tells us how much we might expect any given experiment to deviate from the average. But if we wanted to give an answer to how often a coin landed on heads, with error, we would use the standard error, not the standard deviation.</p>
<p><span class="math inline">\(\sigma = \frac{1}{\sqrt{N}}\text{SD}\)</span></p>
<p>Where <span class="math inline">\(\sigma\)</span> is the standard error, <span class="math inline">\(N\)</span> is the number of times we repeated our experiment, and SD is the standard deviation.</p>
<div class="alert alert-info">
<p>Exercise 11:</p>
<p>Find the fraction of times a flipped coin will land on heads, with the standard error. Repeat for tails.</p>
<p>Hint: you can use len() to determine the number of elements in a numpy array, just like you can with a Python list.</p>
</div>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>heads_err <span class="op">=</span> heads_sdev<span class="op">/</span>np.sqrt(<span class="bu">len</span>(heads_array))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>tails_err <span class="op">=</span> tails_sdev<span class="op">/</span>np.sqrt(<span class="bu">len</span>(tails_array))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The coin will land on heads </span><span class="sc">{</span>heads_avg<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% plus or minus </span><span class="sc">{</span>heads_err<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% of the time"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The coin will land on tails </span><span class="sc">{</span>tails_avg<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% plus or minus </span><span class="sc">{</span>tails_err<span class="op">*</span><span class="dv">100</span><span class="sc">}</span><span class="ss">% of the time"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The coin will land on heads 49.8% plus or minus 0.3454127965203374% of the time
The coin will land on tails 50.2% plus or minus 0.3454127965203374% of the time</code></pre>
<p>Let’s take a look now at how the Monte Carlo method (the repeated experiments) gets us from something with a relatively wide distribution to something with very high accuracy (hint: the more you do, the better it gets)</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(heads_results)<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(heads_results)<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"gray"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>plt.hlines(heads_avg,xmin <span class="op">=</span> <span class="dv">0</span>,xmax <span class="op">=</span><span class="bu">len</span>(heads_results),color <span class="op">=</span> <span class="st">"b"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_57_0.png" class="img-fluid"></p>
<p>All I’ve done here is plot the cumulative average of the results of our experiments for “heads.” I did this using the built-in cumulative sum function and dividing that array by an array that shows the number of experiments completed up to that point (1, then 2, then 3, all the way up to the final number of 1000).</p>
<p>We can see a lot of initial variation in our results, but eventually the average levels out to something very consistent.</p>
<p>This is the power of the Monte Carlo simulation – the larger the number of experiments, the better the results.</p>
<div class="alert alert-info">
<p>Exercise 12:</p>
<p>Repeat the process above to make a plot that shows the cumulative average for the results for tails, along with the final average value. Use red to indicate the average value for tails.</p>
</div>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(tails_results)<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(tails_results)<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"gray"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>plt.hlines(tails_avg,xmin <span class="op">=</span> <span class="dv">0</span>,xmax <span class="op">=</span><span class="bu">len</span>(tails_results),color <span class="op">=</span> <span class="st">"r"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_60_0.png" class="img-fluid"></p>
<div class="alert alert-success">
<p>Stop here for a minute. Check-in with <a href="https://app.sli.do/event/hbQevqDLVfydG7mz4opbrU/embed/polls/73e95464-742c-4121-b7cf-7e404ba31901"> slido</a> and then wait. Work on something else, help your neighbor, etc. We will be returning to this lab shortly.</p>
</div>
</section>
</section>
<section id="the-monty-hall-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-monty-hall-problem">The Monty Hall Problem</h2>
<p>Let’s look at a famous riddle that involves statistics and answer it using Monte Carlo methods.</p>
<p>Suppose you are on a game show, and you have the choice of picking one of three doors: Behind one door is a car; behind the other doors, goats. You pick a door, let’s say door 1, and the host, who knows what’s behind the doors, opens another door, say door 3, which has a goat. The host then asks you: do you want to stick with your choice or choose another door?</p>
<p>Let’s start by setting up our problem. We have three doors, two of which have goats behind them and one of which has a car behind it. We can represent that as a list.</p>
<p>We then initialize some lists to track what happens if we stay and what happens if we change our minds.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>doors <span class="op">=</span> [<span class="st">"car"</span>,<span class="st">"goat"</span>,<span class="st">"goat"</span>]</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>results_stay <span class="op">=</span> []</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>results_change <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We then write a simple function that takes our doors, makes a random selection, and then returns the results in the following way: if our first choice happens to be the door with the car behind it, we win if we stay! So our “stay” results are “car” and our “change” results are goat. If the first choice happens to have a goat behind it, then staying gives us a goat, while changing gives us a car.</p>
<p>Note that it’s important to keep our results straight. We could write a function that looks like this:</p>
<pre><code>def MontyHall(doors):    
    rd.shuffle(doors)
    first_door = rd.choice(doors)
    if first_door == "car":
        return "car", "goat"
    else:
        return "goat", "car"</code></pre>
<p>but then we would have to make sure that we assigned the output in the right order, i.e.</p>
<pre><code>results_stay.append(MontyHall(doors)[0])
results_change.append(MontyHall(doors)[1])</code></pre>
<p>It’s easier to keep track of your results by modifying the lists within the function.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> MontyHall(doors, results_stay, results_change):    </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    rd.shuffle(doors)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    first_door <span class="op">=</span> rd.choice(doors)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> first_door <span class="op">==</span> <span class="st">"car"</span>:</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>        results_stay.append(<span class="st">"car"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        results_change.append(<span class="st">"goat"</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>        results_stay.append(<span class="st">"goat"</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        results_change.append(<span class="st">"car"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="alert alert-info">
<p>Exercise 13:</p>
<p>Test this function. Does it do what you expect? Do you understand the output?</p>
</div>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>results_stay <span class="op">=</span> []</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>results_change <span class="op">=</span> []</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    MontyHall(doors, results_stay, results_change)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(results_stay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>['goat']
['goat', 'car']
['goat', 'car', 'car']
['goat', 'car', 'car', 'car']
['goat', 'car', 'car', 'car', 'goat']
['goat', 'car', 'car', 'car', 'goat', 'goat']
['goat', 'car', 'car', 'car', 'goat', 'goat', 'car']
['goat', 'car', 'car', 'car', 'goat', 'goat', 'car', 'goat']
['goat', 'car', 'car', 'car', 'goat', 'goat', 'car', 'goat', 'goat']
['goat', 'car', 'car', 'car', 'goat', 'goat', 'car', 'goat', 'goat', 'goat']</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>results_stay</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>results_change</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>['car', 'goat', 'goat', 'goat', 'car', 'car', 'goat', 'car', 'car', 'car']</code></pre>
<div class="alert alert-info">
<p>Exercise 14:</p>
<p>Create a function that performs a Monte Carlo simulation for this scenario. It should use a modified version of the Monty Hall function we wrote above, and you can assume one “choice” is one experiment.</p>
<p>Your function should take as an argument the number of Monte Carlo iterations you want to do. It should return a dictionary with two keys: “stay” and “change” whose values are a numpy array that tracks whether won by staying with your original door for “stay” or by changing to the other door for “change” for each experiment.</p>
<p>Hint: you may want to modify the MontyHall function we wrote above to make the results numerical, for example, 1 for a car and 0 for a goat.</p>
<p>Run this function for 10, 100, and 1000 iterations and plot the results for each, similarly to how we plotted the heads/tails results. Show us the cumulative average of wins for “stay” and “change” each, but put them both on the same plot (you don’t need to plot the overall average for each, just the cumulative average)</p>
</div>
<div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> MontyHall(doors, results_stay, results_change):    </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    rd.shuffle(doors)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    first_door <span class="op">=</span> rd.choice(doors)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> first_door <span class="op">==</span> <span class="st">"car"</span>:</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>        results_stay.append(<span class="dv">1</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>        results_change.append(<span class="dv">0</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>        results_stay.append(<span class="dv">0</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>        results_change.append(<span class="dv">1</span>)</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> MontyHallMC(n_MC):</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    results_stay <span class="op">=</span> [] </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    results_change <span class="op">=</span> []</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(n_MC):</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>        MontyHall(doors, results_stay, results_change)</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> {}</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    results[<span class="st">"stay"</span>] <span class="op">=</span> np.asarray(results_stay)</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    results[<span class="st">"change"</span>] <span class="op">=</span> np.asarray(results_change)</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>results_10 <span class="op">=</span> MontyHallMC(<span class="dv">10</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_10[<span class="st">"stay"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_10[<span class="st">"stay"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"r"</span>, label <span class="op">=</span> <span class="st">"stay"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_10[<span class="st">"change"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_10[<span class="st">"change"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"b"</span>, label <span class="op">=</span> <span class="st">"change"</span>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_73_0.png" class="img-fluid"></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>results_100 <span class="op">=</span> MontyHallMC(<span class="dv">100</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_100[<span class="st">"stay"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_100[<span class="st">"stay"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"r"</span>, label <span class="op">=</span> <span class="st">"stay"</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_100[<span class="st">"change"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_100[<span class="st">"change"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"b"</span>, label <span class="op">=</span> <span class="st">"change"</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_74_0.png" class="img-fluid"></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>results_1000 <span class="op">=</span> MontyHallMC(<span class="dv">1000</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_1000[<span class="st">"stay"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_1000[<span class="st">"stay"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"r"</span>, label <span class="op">=</span> <span class="st">"stay"</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(results_1000[<span class="st">"change"</span>])<span class="op">/</span>np.arange(<span class="dv">1</span>,<span class="bu">len</span>(results_1000[<span class="st">"change"</span>])<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>), color <span class="op">=</span> <span class="st">"b"</span>, label <span class="op">=</span> <span class="st">"change"</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_75_0.png" class="img-fluid"></p>
<div class="alert alert-success">
<p>Stop here for a minute. Check-in with <a href="https://app.sli.do/event/hbQevqDLVfydG7mz4opbrU/embed/polls/2ac758d9-e6ed-4239-8272-8f96b82cd2e5"> slido</a> and then wait. Work on something else, help your neighbor, etc. We will be returning to this lab shortly.</p>
</div>
</section>
<section id="why-the-house-always-wins" class="level2">
<h2 class="anchored" data-anchor-id="why-the-house-always-wins">Why the House Always Wins</h2>
<p>Lest you start to think your insider knowledge of statistics is going to give you the upper hand at the casino, let’s talk about how to use Monte Carlo methods to demonstrate that the house always (on average) wins.</p>
<section id="the-scenario" class="level3">
<h3 class="anchored" data-anchor-id="the-scenario">The scenario</h3>
<p>Consider an imaginary game in which our player, rolls an imaginary dice to get an outcome of 1 to 100. If the player rolls anything from 1–51, the house wins, but if the number rolled is from 52–100, the player wins.</p>
<p>The house edge displays the advantage the casino has in winning the bet. It’s the casino’s average profit from a player’s bet.</p>
<p>Let’s suppose our player bets 1 dollar on this game.</p>
<p><span class="math inline">\(P(player\ wins) = 49/100,\ P(casino\ wins)= 51/100\)</span></p>
<p><span class="math inline">\(E(player\ profit)= 1*(49/100)-1*(51/100) = -0.02 = -2\%\)</span></p>
<p>Therefore, the house edge in our imaginary game is 2%.</p>
<p>(This isn’t just because of our fictional scenario – you can see some house edges <a href="https://wizardofodds.com/gambling/house-edge/"> here </a> to see how our game compares. We are actually being quite generous to our fictional player)</p>
</section>
<section id="the-simulation" class="level3">
<h3 class="anchored" data-anchor-id="the-simulation">The simulation</h3>
<p>We need a dice simulator which throws a value from 1–100 with uniform probability distribution.</p>
<div class="alert alert-info">
<p>Exercise 15:</p>
<p>Create a function to simulate the dice throw above and return the boolean operator True if the player wins and False if the casino wins.</p>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> roll():</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> rd.randrange(<span class="dv">1</span>,<span class="dv">101</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="op">&gt;</span> <span class="dv">51</span>:</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now that we’ve simulated the roll, we need to simulate the betting process. This is a little more complicated, but we can use the equation for expected profit above to help us out. We should consider three things:</p>
<ol type="i">
<li><p>Starting funds : The money the player is starting with</p></li>
<li><p>Wager Amount : The amount the player bets in each game</p></li>
<li><p>Total plays : The number of times the player plays the game (This value is changed for creating different scenarios)</p></li>
</ol>
<div class="alert alert-info">
<p>Exercise 16:</p>
<p>Create a function that simulates (multiple) bets. It should take as input the starting funds, the wager amount (for the sake of simplicity, let’s say the player bets the same amount on each play), and the number of plays.</p>
<p>This function should track the amount of money the player has after each play, from start to end. Let’s assume that number can become negative (i.e.&nbsp;they can rack up a debt to the casino). It should return an array with those amounts.</p>
<p>Don’t forget to test that function – make sure it’s doing what you want.</p>
</div>
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> play_game(starting_funds,wager,num_plays):</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    outcomes <span class="op">=</span> np.array([starting_funds])</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    funds <span class="op">=</span> starting_funds</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(num_plays):</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> roll():</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>            funds <span class="op">+=</span> wager</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>            funds <span class="op">-=</span> wager</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        outcomes <span class="op">=</span> np.append(outcomes,funds)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> outcomes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>play_game(<span class="dv">100</span>,<span class="dv">10</span>,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>array([100, 110, 100,  90, 100, 110, 100,  90,  80,  70,  80])</code></pre>
<p>Now, remember we are looking for average behavior. Hopefully you noticed in testing your function that sometimes the player emerges with more money than they started with! That’s the allure of gambling! But hopefully you also noticed that most often, the player ends at a loss.</p>
<p>If we want to know how this looks to the house, what we need to do is simulate many many scenarios and see what the average result is (and how large the error is on that result). That’s just a Monte Carlo simulation (aptly named).</p>
<div class="alert alert-info">
<p>Exercise 17:</p>
<p>Write a function that does a Monte Carlo simulation of playing the game with a fixed starting amount, wager amount, and number of plays.</p>
<p>Remember to run the simulation many times (let’s go with 1,000).</p>
<p>Plot the outcomes – it can help to show the individual scenarios alongside the average (in a different color, and/or with an alpha less than 1 so we can see how all the varied outcomes contribute to the overall average. You can include this plot as part of your MC function or you can write it separately.</p>
</div>
<div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> MC_gambling(n_MC, starting_funds, wager, num_plays):</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    MC_outcomes <span class="op">=</span> []</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(n_MC):</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        outcomes <span class="op">=</span> play_game(starting_funds,wager,num_plays)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        plt.plot(outcomes, alpha <span class="op">=</span> <span class="fl">0.25</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>        MC_outcomes.append(outcomes)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    plays <span class="op">=</span> np.arange(<span class="dv">0</span>,num_plays<span class="op">+</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    MC_avg <span class="op">=</span> np.mean(MC_outcomes,axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    MC_err <span class="op">=</span> np.std(MC_outcomes,axis <span class="op">=</span> <span class="dv">0</span>)<span class="op">/</span>np.sqrt(n_MC)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    plt.errorbar(x <span class="op">=</span> plays, y <span class="op">=</span> MC_avg, yerr <span class="op">=</span> MC_err, color <span class="op">=</span> <span class="st">"black"</span>)<span class="co">#, linestyle = "dashed")</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    plt.errorbar(x <span class="op">=</span> plays, y<span class="op">=</span> MC_avg, yerr <span class="op">=</span> MC_err, color <span class="op">=</span> <span class="st">"black"</span>)</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>n_MC <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>starting_funds <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>wager <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>num_plays <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>MC_gambling(n_MC, starting_funds, wager, num_plays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_92_0.png" class="img-fluid"></p>
<p><img src="./graphics/output_92_1.png" class="img-fluid"></p>
</section>
<section id="testing-different-scenarios" class="level3">
<h3 class="anchored" data-anchor-id="testing-different-scenarios">Testing different scenarios</h3>
<div class="alert alert-info">
<p>Exercise 18:</p>
<p>Try your function out on the following scenarios:</p>
<p>Scenario 1: * Starting funds: 10000 * Wager amount: 100 * Number of bets : 5</p>
<p>Scenario 2: * Starting funds: 10000 * Wager amount: 100 * Number of bets : 10</p>
<p>Scenario 3: * Starting funds: 10000 * Wager amount: 100 * Number of bets : 100</p>
<p>Scenario 4: * Starting funds: 10000 * Wager amount: 100 * Number of bets : 10000</p>
<p>Plot the individual outcomes and average result from each simulation. What do you notice?</p>
</div>
<div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">#scenario 1</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>starting_funds <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>wager <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>num_plays <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>MC_gambling(n_MC, starting_funds, wager, num_plays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_95_0.png" class="img-fluid"></p>
<p><img src="./graphics/output_95_1.png" class="img-fluid"></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#scenario 2</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>starting_funds <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>wager <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>num_plays <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>MC_gambling(n_MC, starting_funds, wager, num_plays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_96_0.png" class="img-fluid"></p>
<p><img src="./graphics/output_96_1.png" class="img-fluid"></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#scenario 3</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>starting_funds <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>wager <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>num_plays <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>MC_gambling(n_MC, starting_funds, wager, num_plays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_97_0.png" class="img-fluid"></p>
<p><img src="./graphics/output_97_1.png" class="img-fluid"></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#solution</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#scenario 4</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>starting_funds <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>wager <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>num_plays <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>MC_gambling(n_MC, starting_funds, wager, num_plays)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="./graphics/output_98_0.png" class="img-fluid"></p>
<p><img src="./graphics/output_98_1.png" class="img-fluid"></p>
<p><img src="./graphics/the-good-place-pobodys-nerfect.gif" class="img-fluid"></p>
</section>
</section>
</section>
<section id="post-lab-production-and-reflection" class="level1">
<h1>Post-Lab: Production and Reflection</h1>
<p>When you are done with this lab, make sure you save and export it as an HTML. This HTML file is what you will turn in through Moodle. In addition, don’t forget to fill out the <a href="https://forms.gle/jF6zkS7BgWp2JNFP8">post-lab reflection form</a>. You must turn in both an HTML that demonstrates you have completed the lab and a self-reflection to get credit.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>